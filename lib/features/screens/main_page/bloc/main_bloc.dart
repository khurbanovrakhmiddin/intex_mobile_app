import 'dart:async';import 'package:bloc/bloc.dart';import 'package:equatable/equatable.dart';import 'package:intex_mobile_app/core/models/Catalog_model.dart';import 'package:intex_mobile_app/core/repository/catalog_repository.dart';import 'package:intex_mobile_app/core/service/interseptor.dart';part 'main_event.dart';part 'main_state.dart';class MainBloc extends Bloc<MainEvent, MainState> { final Repository repository;  List<Catalog> data = [];  MainBloc(this.repository) : super(MainInitial()) {    on<MainGetEvent>(_getData);    on<MainGetCategoryEvent>(_getDataByCategory);  }  FutureOr<void> _getData(MainGetEvent event,Emitter<MainState>  emit)async{emit(MainLoadingState());try{  data =    await repository.loadCatalog();  print(data.length);}catch(e){  emit(MainGetDataState(data));  // emit(MainErrorState(e.toString()));}  }  FutureOr<void> _getDataByCategory(MainGetCategoryEvent event,Emitter<MainState>  emit)async{emit(MainLoadingState());try{  data =    await repository.loadSortedCatalog(event.categoryID);  print(data.length);  emit(MainGetDataByCategoriesState(data));}catch(e){  emit(MainGetDataByCategoriesState(data));  // emit(MainErrorState(e.toString()));}  }}